<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FourT MIDI Community - Chia sáº» MIDI files</title>
    <meta name="description"
        content="Cá»™ng Ä‘á»“ng chia sáº» MIDI files cho game Where Winds Meet. Táº£i, Ä‘Ã¡nh giÃ¡ vÃ  bÃ¬nh luáº­n MIDI miá»…n phÃ­.">
    <link rel="icon" href="/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/community/community.css">
</head>

<body>
    <!-- Background Effects -->
    <div class="bg-wrapper">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>
    <div class="grid-overlay"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <img src="/favicon.ico" alt="FourT" class="nav-logo-img">
                <span>FourT MIDI</span>
            </a>
            <div class="nav-links">
                <a href="/community" class="nav-link active">ğŸµ KhÃ¡m phÃ¡</a>
                <a href="/community/leaderboard" class="nav-link" id="nav-leaderboard">ğŸ† Báº£ng xáº¿p háº¡ng</a>
                <a href="/community/upload" class="nav-link" id="nav-upload">â¬†ï¸ Upload</a>
            </div>
            <div class="nav-auth" id="nav-auth">
                <button class="btn btn-outline" onclick="showLoginModal()">ÄÄƒng nháº­p</button>
                <button class="btn btn-primary" onclick="showRegisterModal()">ÄÄƒng kÃ½</button>
            </div>
            <div class="nav-user" id="nav-user" style="display: none;">
                <div class="user-points" id="user-points">ğŸ’° 0 pts</div>
                <div class="user-avatar" onclick="toggleUserMenu()">
                    <span id="user-initial">U</span>
                </div>
                <div class="user-menu" id="user-menu">
                    <a href="/community/profile" class="user-menu-item">ğŸ‘¤ Há»“ sÆ¡</a>
                    <a href="/community/my-midi" class="user-menu-item">ğŸµ MIDI cá»§a tÃ´i</a>
                    <a href="/community/downloads" class="user-menu-item">ğŸ“¥ ÄÃ£ táº£i</a>
                    <a href="/community/checkin" class="user-menu-item">âœ¨ Check-in</a>
                    <hr>
                    <a href="#" class="user-menu-item logout" onclick="logout()">ğŸšª ÄÄƒng xuáº¥t</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Hero Section -->
            <section class="community-hero">
                <h1 class="hero-title">
                    <span class="title-icon">ğŸµ</span>
                    <span class="text-gradient">MIDI Community</span>
                </h1>
                <p class="hero-subtitle">KhÃ¡m phÃ¡, chia sáº» vÃ  chÆ¡i MIDI trong game Where Winds Meet</p>

                <!-- Search Bar -->
                <div class="search-container">
                    <input type="text" class="search-input" id="search-input" placeholder="TÃ¬m kiáº¿m bÃ i hÃ¡t...">
                    <button class="search-btn" onclick="searchMidi()">ğŸ”</button>
                </div>

                <!-- Filter Tabs -->
                <div class="filter-tabs">
                    <button class="filter-tab active" data-sort="newest">ğŸ†• Má»›i nháº¥t</button>
                    <button class="filter-tab" data-sort="popular">ğŸ”¥ Phá»• biáº¿n</button>
                    <button class="filter-tab" data-sort="rating">â­ ÄÃ¡nh giÃ¡ cao</button>
                </div>
            </section>

            <!-- MIDI Grid -->
            <section class="midi-grid" id="midi-grid">
                <!-- MIDI cards will be loaded here -->
                <div class="loading-spinner" id="loading">
                    <div class="spinner"></div>
                    <p>Äang táº£i...</p>
                </div>
            </section>

            <!-- Pagination -->
            <div class="pagination" id="pagination"></div>
        </div>
    </main>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-overlay" onclick="closeModals()"></div>
        <div class="modal-content">
            <button class="modal-close" onclick="closeModals()">Ã—</button>
            <h2 class="modal-title">ğŸ” ÄÄƒng nháº­p</h2>
            <form id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="login-email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Máº­t kháº©u</label>
                    <input type="password" id="login-password" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <button type="submit" class="btn btn-primary btn-full">ÄÄƒng nháº­p</button>
            </form>
            <p class="modal-footer-text">
                ChÆ°a cÃ³ tÃ i khoáº£n? <a href="#" onclick="showRegisterModal()">ÄÄƒng kÃ½ ngay</a>
            </p>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="register-modal">
        <div class="modal-overlay" onclick="closeModals()"></div>
        <div class="modal-content">
            <button class="modal-close" onclick="closeModals()">Ã—</button>
            <h2 class="modal-title">âœ¨ ÄÄƒng kÃ½</h2>
            <form id="register-form" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label>TÃªn ngÆ°á»i dÃ¹ng</label>
                    <input type="text" id="register-username" required placeholder="username" minlength="3"
                        maxlength="50">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="register-email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Máº­t kháº©u</label>
                    <input type="password" id="register-password" required placeholder="Ãt nháº¥t 6 kÃ½ tá»±" minlength="6">
                </div>
                <button type="submit" class="btn btn-primary btn-full">ÄÄƒng kÃ½ (+5 Ä‘iá»ƒm)</button>
            </form>
            <p class="modal-footer-text">
                ÄÃ£ cÃ³ tÃ i khoáº£n? <a href="#" onclick="showLoginModal()">ÄÄƒng nháº­p</a>
            </p>
        </div>
    </div>

    <!-- MIDI Detail Modal -->
    <div class="modal" id="midi-modal">
        <div class="modal-overlay" onclick="closeModals()"></div>
        <div class="modal-content modal-large">
            <button class="modal-close" onclick="closeModals()">Ã—</button>
            <div id="midi-detail-content">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- MIDI Mini Player Bar -->
    <div class="midi-player-bar" id="midi-player-bar">
        <div class="player-info">
            <span class="player-status" id="player-status">ğŸµ</span>
            <span class="player-title" id="player-title">Chá»n bÃ i Ä‘á»ƒ nghe thá»­</span>
        </div>
        <div class="player-controls">
            <button class="player-btn" id="player-play-btn" onclick="togglePlay()" disabled>â–¶ï¸</button>
        </div>
    </div>

    <!-- MIDIjs Library for MIDI playback -->
    <script src="https://www.midijs.net/lib/midi.js"></script>
    <script src="/community/app.js"></script>
</body>

</html>